<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:26,&quot;tests&quot;:38,&quot;passes&quot;:38,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2021-03-23T11:31:13.566Z&quot;,&quot;end&quot;:&quot;2021-03-23T11:31:14.456Z&quot;,&quot;duration&quot;:890,&quot;testsRegistered&quot;:38,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;45e71f67-d2a3-4eaa-b58f-062fa3f84655&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3252f5d1-f904-497b-b5f9-451da5163792&quot;,&quot;title&quot;:&quot;#formatComplaintData&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;21d6a333-5f53-4f5b-b8a2-06bdfede8e7c&quot;,&quot;title&quot;:&quot;reason&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7b28c568-87e3-4e3d-8771-7435c7db5e9c&quot;,&quot;title&quot;:&quot;immigration-application&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;SUBMITTING_APPLICATION\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason immigration-application returns complaint data with type \&quot;SUBMITTING_APPLICATION\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;immigration-application&#x27;,\n  &#x27;immigration-application&#x27;: &#x27;technical-issues&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;SUBMITTING_APPLICATION&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd6f2999-94e7-48aa-9ccd-9fa7121ba406&quot;,&quot;parentUUID&quot;:&quot;7b28c568-87e3-4e3d-8771-7435c7db5e9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd6f2999-94e7-48aa-9ccd-9fa7121ba406&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f660d02-cfa6-4ef6-956d-f8f35b9b17a6&quot;,&quot;title&quot;:&quot;immigration-appointment&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;MAKING_APPOINTMENT\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason immigration-appointment returns complaint data with type \&quot;MAKING_APPOINTMENT\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;immigration-appointment&#x27;,\n  &#x27;immigration-appointment&#x27;: &#x27;lack-availability&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;MAKING_APPOINTMENT&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;968461f1-f04f-4d62-ba0d-c4a60a77894e&quot;,&quot;parentUUID&quot;:&quot;6f660d02-cfa6-4ef6-956d-f8f35b9b17a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;968461f1-f04f-4d62-ba0d-c4a60a77894e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e6618c2-dc83-4437-8f66-53da7165b43f&quot;,&quot;title&quot;:&quot;delays&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;DELAYS\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason delays returns complaint data with type \&quot;DELAYS\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;delays&#x27;,\n  &#x27;delay-type&#x27;: &#x27;application-delay&#x27;,\n  &#x27;return-of-documents&#x27;: &#x27;yes-other&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;DELAYS&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6475a1cd-6c0b-4f0a-86e9-ef907cddf18c&quot;,&quot;parentUUID&quot;:&quot;3e6618c2-dc83-4437-8f66-53da7165b43f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6475a1cd-6c0b-4f0a-86e9-ef907cddf18c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a72e07a4-0136-42d6-9100-cc0f4f6272d6&quot;,&quot;title&quot;:&quot;biometric-residence-permit&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;BIOMETRIC_RESIDENCE_PERMIT\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason biometric-residence-permit returns complaint data with type \&quot;BIOMETRIC_RESIDENCE_PERMIT\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;biometric-residence-permit&#x27;,\n  &#x27;biometric-residence-permit&#x27;: &#x27;card-incorrect&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;BIOMETRIC_RESIDENCE_PERMIT&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b8c4955-ab46-422a-afbc-33b0952edb7a&quot;,&quot;parentUUID&quot;:&quot;a72e07a4-0136-42d6-9100-cc0f4f6272d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b8c4955-ab46-422a-afbc-33b0952edb7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8cfdb7c1-7f84-413e-b30b-1363cea3326d&quot;,&quot;title&quot;:&quot;immigration-decision&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;IMMIGRATION_DECISION\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason immigration-decision returns complaint data with type \&quot;IMMIGRATION_DECISION\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;immigration-decision&#x27;,\n  &#x27;decision-outcome&#x27;: &#x27;negative&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;IMMIGRATION_DECISION&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0679d0b6-f900-4ce4-b549-9b9c873c454e&quot;,&quot;parentUUID&quot;:&quot;8cfdb7c1-7f84-413e-b30b-1363cea3326d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0679d0b6-f900-4ce4-b549-9b9c873c454e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;634ea5e7-9bf1-4c6b-a132-d1ece59155b2&quot;,&quot;title&quot;:&quot;refund&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;REFUND\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason refund returns complaint data with type \&quot;REFUND\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;refund&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;REFUND&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c98534b9-b368-40a2-8e56-bb391232946d&quot;,&quot;parentUUID&quot;:&quot;634ea5e7-9bf1-4c6b-a132-d1ece59155b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c98534b9-b368-40a2-8e56-bb391232946d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1fc3295a-1ddf-4d9a-b166-286e314199b4&quot;,&quot;title&quot;:&quot;staff-behaviour&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c9df1a2e-f6ae-444c-ab6c-a282717732d3&quot;,&quot;title&quot;:&quot;poor-information&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;POOR_INFORMATION\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason staff-behaviour poor-information returns complaint data with type \&quot;POOR_INFORMATION\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;staff-behaviour&#x27;,\n  &#x27;poor-info-or-behaviour&#x27;: &#x27;poor-information&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;POOR_INFORMATION&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;687b40aa-d27c-4883-9128-96583d2224ea&quot;,&quot;parentUUID&quot;:&quot;c9df1a2e-f6ae-444c-ab6c-a282717732d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;687b40aa-d27c-4883-9128-96583d2224ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1095caf0-25c6-49e5-afee-cf5289c4d7c3&quot;,&quot;title&quot;:&quot;staff-behaviour&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;POOR_STAFF_BEHAVIOUR\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason staff-behaviour staff-behaviour returns complaint data with type \&quot;POOR_STAFF_BEHAVIOUR\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;staff-behaviour&#x27;,\n  &#x27;poor-info-or-behaviour&#x27;: &#x27;staff-behaviour&#x27;,\n  &#x27;staff-behaviour&#x27;: &#x27;in-letter&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;POOR_STAFF_BEHAVIOUR&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e3be30d-19a4-47ab-a9da-f68b8a9ad29e&quot;,&quot;parentUUID&quot;:&quot;1095caf0-25c6-49e5-afee-cf5289c4d7c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e3be30d-19a4-47ab-a9da-f68b8a9ad29e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;57120a47-4c80-44dc-8fd6-95c51499668e&quot;,&quot;title&quot;:&quot;invalid value&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;throws an error if an invalid poor-info-or-behaviour value is provided&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason staff-behaviour invalid value throws an error if an invalid poor-info-or-behaviour value is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;staff-behaviour&#x27;,\n  &#x27;poor-info-or-behaviour&#x27;: &#x27;invalid&#x27;,\n}, complaintDetailsBase);\nexpect(() =&gt; formatComplaintData(values)).to.throw(&#x27;Invalid poor-info-or-behaviour value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;768252f9-40af-4f03-b4c6-c9284612d9fb&quot;,&quot;parentUUID&quot;:&quot;57120a47-4c80-44dc-8fd6-95c51499668e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;768252f9-40af-4f03-b4c6-c9284612d9fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a0a6484-effc-4156-a29e-3858ec3d00de&quot;,&quot;title&quot;:&quot;existing-complaint&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;EXISTING\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason existing-complaint returns complaint data with type \&quot;EXISTING\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;existing-complaint&#x27;,\n  &#x27;existing-complaint&#x27;: &#x27;yes&#x27;,\n  &#x27;complaint-reference-number&#x27;: &#x27;ghjkld&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;EXISTING&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e786a16-6ba5-49aa-87df-876cc5dd4eac&quot;,&quot;parentUUID&quot;:&quot;3a0a6484-effc-4156-a29e-3858ec3d00de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e786a16-6ba5-49aa-87df-876cc5dd4eac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8c2b8c2-4844-4589-9068-a0372569c667&quot;,&quot;title&quot;:&quot;other-complaint&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns complaint data with type \&quot;SOMETHING_ELSE\&quot;&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason other-complaint returns complaint data with type \&quot;SOMETHING_ELSE\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;other-complaint&#x27;,\n}, complaintDetailsBase);\nconst complaintData = formatComplaintData(values);\nexpect(complaintData.complaint.complaintType).to.eql(&#x27;SOMETHING_ELSE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40fb5a72-cc9f-44f5-8473-917e23761f8a&quot;,&quot;parentUUID&quot;:&quot;b8c2b8c2-4844-4589-9068-a0372569c667&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40fb5a72-cc9f-44f5-8473-917e23761f8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed64935d-6a90-47ed-af28-c004ae22ea92&quot;,&quot;title&quot;:&quot;invalid reason&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/format-complaint-data.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;throws an error if an invalid reason is provided&quot;,&quot;fullTitle&quot;:&quot;#formatComplaintData reason invalid reason throws an error if an invalid reason is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const values = Object.assign({\n  reason: &#x27;invalid&#x27;,\n}, complaintDetailsBase);\nexpect(() =&gt; formatComplaintData(values)).to.throw(&#x27;Complaint reason not recognized&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ce23800-1e38-4cce-80c2-17357d819d3e&quot;,&quot;parentUUID&quot;:&quot;ed64935d-6a90-47ed-af28-c004ae22ea92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ce23800-1e38-4cce-80c2-17357d819d3e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5e02b225-d204-475b-8a93-4974aad66913&quot;,&quot;title&quot;:&quot;Complaint&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Complaint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint \&quot;before each\&quot; hook in \&quot;Complaint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const momentStub = sinon.stub().returns({\n      format: () =&gt; (creationDate)\n    });\n    Complaint = proxyquire(&#x27;../../../../apps/ukvi-complaints/lib/json-converters/complaint&#x27;, {\n      &#x27;moment&#x27;: momentStub\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfb9167c-8e5c-47c1-97ed-a4f605ea8c0c&quot;,&quot;parentUUID&quot;:&quot;5e02b225-d204-475b-8a93-4974aad66913&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should have property complaintAttributes which is an object&quot;,&quot;fullTitle&quot;:&quot;Complaint Should have property complaintAttributes which is an object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicantTestValues);\nexpect(complaint.complaintAttributes).to.be.an(&#x27;object&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0298ac59-99cc-41f7-b49e-196ff972929b&quot;,&quot;parentUUID&quot;:&quot;5e02b225-d204-475b-8a93-4974aad66913&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e8cc945a-9643-49ea-a589-d206584bc44d&quot;,&quot;title&quot;:&quot;complaintAttributes&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should have creationDate set&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes Should have creationDate set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicantTestValues);\nexpect(complaint.complaintAttributes.creationDate).to.eql(creationDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c391f25d-867c-4c7e-a797-1796a4b4cacd&quot;,&quot;parentUUID&quot;:&quot;e8cc945a-9643-49ea-a589-d206584bc44d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;af14b3ba-f59c-48e9-8472-7e7a8b09f887&quot;,&quot;title&quot;:&quot;reporterDetails&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cc908d30-8f43-4deb-b788-fff531e8a022&quot;,&quot;title&quot;:&quot;applicant&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;applicant\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant \&quot;before each\&quot; hook in \&quot;applicant\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;reporterDetailsValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c365341-292d-4821-87fb-faf6dfcaa5c5&quot;,&quot;parentUUID&quot;:&quot;cc908d30-8f43-4deb-b788-fff531e8a022&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should return applicant details without phone number if not included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant Should return applicant details without phone number if not included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(reporterDetailsValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeApplicant,\n  applicantName: testApplicantName,\n  applicantNationality: testApplicantNationality,\n  applicantDob: testApplicantDob,\n  applicantEmail: testApplicantEmail,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a74268b1-7bce-4706-8628-8732200f414f&quot;,&quot;parentUUID&quot;:&quot;cc908d30-8f43-4deb-b788-fff531e8a022&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return applicant details with phone number if included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant Should return applicant details with phone number if included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;reporterDetailsValues[&#x27;applicant-phone&#x27;] = testApplicantPhone;\ncomplaint = new Complaint(reporterDetailsValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeApplicant,\n  applicantName: testApplicantName,\n  applicantNationality: testApplicantNationality,\n  applicantDob: testApplicantDob,\n  applicantEmail: testApplicantEmail,\n  applicantPhone: testApplicantPhone,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d29446e1-468e-46c9-922e-adf0be481b97&quot;,&quot;parentUUID&quot;:&quot;cc908d30-8f43-4deb-b788-fff531e8a022&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a74268b1-7bce-4706-8628-8732200f414f&quot;,&quot;d29446e1-468e-46c9-922e-adf0be481b97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;title&quot;:&quot;agent&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;agent\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent \&quot;before each\&quot; hook in \&quot;agent\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues = Object.assign({}, agentTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e447e8d6-79d2-4514-8446-34165f8a2760&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should return agent and applicant details with agentType RELATIVE&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType RELATIVE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;relative&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;RELATIVE&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdf6d33c-0598-43f5-a6f5-ee4a2334f14d&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType LEGAL_REP&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType LEGAL_REP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;legal-rep&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;LEGAL_REP&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd646923-77da-4b84-8e45-d9998bb73efa&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType SPONSOR&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType SPONSOR&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;sponsor&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;SPONSOR&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22c42f4c-8881-4fc2-b2a0-e05b6d2ca1b8&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType SUPPORT_ORG&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType SUPPORT_ORG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;support-org&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;SUPPORT_ORG&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf2ba032-fb19-4509-ba09-3501a1c0d31f&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return agent details with phone number if included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent Should return agent details with phone number if included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;agent-phone&#x27;] = testAgentPhone;\nagentValues[&#x27;who-representing&#x27;] = &#x27;relative&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;RELATIVE&#x27;,\n    agentEmail: testAgentEmail,\n    agentPhone: testAgentPhone,\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;386000cb-9cac-4bfd-a126-3f2d3b181bf8&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if incorrect who-representing type specified&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent should throw error if incorrect who-representing type specified&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;error-agent&#x27;;\nexpect(() =&gt; new Complaint(agentValues)).to.throw(&#x27;invalid \&quot;who-representing\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cb9cb26-4c5d-4069-8e7a-f7b36440c238&quot;,&quot;parentUUID&quot;:&quot;54bae074-a3f2-4eef-91d1-6d133ff63899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdf6d33c-0598-43f5-a6f5-ee4a2334f14d&quot;,&quot;fd646923-77da-4b84-8e45-d9998bb73efa&quot;,&quot;22c42f4c-8881-4fc2-b2a0-e05b6d2ca1b8&quot;,&quot;cf2ba032-fb19-4509-ba09-3501a1c0d31f&quot;,&quot;386000cb-9cac-4bfd-a126-3f2d3b181bf8&quot;,&quot;4cb9cb26-4c5d-4069-8e7a-f7b36440c238&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;title&quot;:&quot;reference&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;reference\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference \&quot;before each\&quot; hook in \&quot;reference\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beb3e8f2-28d6-401a-a4e1-5d96298d7861&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Does not include a reference if reference-number is not present&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference Does not include a reference if reference-number is not present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint).to.not.have.all.keys(&#x27;reference&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;407b61aa-46b5-4460-b03b-fba1b33c82ba&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Does not include a reference if reference-numbers is specified as \&quot;none\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference Does not include a reference if reference-numbers is specified as \&quot;none\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;none&#x27;;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint).to.not.have.all.keys(&#x27;reference&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad9ea4cc-d890-4179-bdda-6af2ac96a0b2&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;gwf\&quot; reference, reference number will be set on GWF_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;gwf\&quot; reference, reference number will be set on GWF_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;gwf&#x27;;\nreferenceValues[&#x27;gwf-reference&#x27;] = testGwfRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;GWF_REF&#x27;,\n  reference: testGwfRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a8bd5d0-a5dc-4562-a443-6c9367815aa3&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;ho\&quot; reference, reference number will be set on HO_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;ho\&quot; reference, reference number will be set on HO_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;ho&#x27;;\nreferenceValues[&#x27;ho-reference&#x27;] = testHoRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;HO_REF&#x27;,\n  reference: testHoRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;851c4067-612e-47e5-b58a-202491f682cc&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;ihs\&quot; reference, reference number will be set on IHS_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;ihs\&quot; reference, reference number will be set on IHS_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;ihs&#x27;;\nreferenceValues[&#x27;ihs-reference&#x27;] = testIhsRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;IHS_REF&#x27;,\n  reference: testIhsRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83aa3ba-3785-40c9-9b12-c904320b8730&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;uan\&quot; reference, reference number will be set on UAN_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;uan\&quot; reference, reference number will be set on UAN_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;uan&#x27;;\nreferenceValues[&#x27;uan-reference&#x27;] = testUanRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;UAN_REF&#x27;,\n  reference: testUanRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;945fe502-9971-49fd-9251-9c3e6c4e349c&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if incorrect ref type specified&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference should throw error if incorrect ref type specified&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;fff&#x27;;\nexpect(() =&gt; new Complaint(referenceValues)).to.throw(&#x27;invalid \&quot;reference-numbers\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa46f23e-2876-46a8-8f75-3dccecdd1147&quot;,&quot;parentUUID&quot;:&quot;f23dab3d-e7cb-4f79-843a-f1c66bbe2088&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;407b61aa-46b5-4460-b03b-fba1b33c82ba&quot;,&quot;ad9ea4cc-d890-4179-bdda-6af2ac96a0b2&quot;,&quot;6a8bd5d0-a5dc-4562-a443-6c9367815aa3&quot;,&quot;851c4067-612e-47e5-b58a-202491f682cc&quot;,&quot;a83aa3ba-3785-40c9-9b12-c904320b8730&quot;,&quot;945fe502-9971-49fd-9251-9c3e6c4e349c&quot;,&quot;aa46f23e-2876-46a8-8f75-3dccecdd1147&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fb9a876f-94ae-4583-84c5-d5b66235ea12&quot;,&quot;title&quot;:&quot;complaintDetails&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;title&quot;:&quot;applicationLocation&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;applicationLocation\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation \&quot;before each\&quot; hook in \&quot;applicationLocation\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;835b7414-3932-4861-a814-17a0b4eed56b&quot;,&quot;parentUUID&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;If no location provided, applicationLocation is not set&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If no location provided, applicationLocation is not set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails).to.not.have.all.keys(&#x27;applicationLocation&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e2ffbdb-5247-4384-afb5-09fb3fc3a1e7&quot;,&quot;parentUUID&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If applied from \&quot;inside-uk\&quot;, applicationLocation set to INSIDE_UK&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If applied from \&quot;inside-uk\&quot;, applicationLocation set to INSIDE_UK&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;inside-uk&#x27;;\ncomplaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails.applicationLocation).to.eql(&#x27;INSIDE_UK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e00c7f4-c9bb-4e16-a618-4a0ce4e0c783&quot;,&quot;parentUUID&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If applied from \&quot;outside-uk\&quot;, applicationLocation set to OUTSIDE_UK&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If applied from \&quot;outside-uk\&quot;, applicationLocation set to OUTSIDE_UK&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;outside-uk&#x27;;\ncomplaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails.applicationLocation).to.eql(&#x27;OUTSIDE_UK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84c61afe-4926-4e4d-8f34-8d86a5ff2454&quot;,&quot;parentUUID&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;It throws an error if invalid \&quot;where-applied-from\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation It throws an error if invalid \&quot;where-applied-from\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;location&#x27;;\nexpect(() =&gt; new Complaint(applicationLocationValues)).to.throw(&#x27;invalid \&quot;where-applied-from\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85b32e65-f278-4c55-bc0f-273b2ca79c9b&quot;,&quot;parentUUID&quot;:&quot;8b078a28-6521-48a4-9bf8-b32de7dd0b7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e2ffbdb-5247-4384-afb5-09fb3fc3a1e7&quot;,&quot;0e00c7f4-c9bb-4e16-a618-4a0ce4e0c783&quot;,&quot;84c61afe-4926-4e4d-8f34-8d86a5ff2454&quot;,&quot;85b32e65-f278-4c55-bc0f-273b2ca79c9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;c391f25d-867c-4c7e-a797-1796a4b4cacd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;0298ac59-99cc-41f7-b49e-196ff972929b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bb23761d-a0c5-4f08-8314-29c836ef20a8&quot;,&quot;title&quot;:&quot;utils&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;fullTitle&quot;:&quot;utils \&quot;before each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;uuidStub = sinon.stub().returns(testUuid);\nsendStub = sinon.stub().resolves();\nsendStub.withArgs({\n  id: testUuid,\n  body: JSON.stringify(invalidComplaintData)\n}).rejects();\ncreateSub = sinon.stub().returns({\n  send: sendStub\n});\nutils = proxyquire(&#x27;../../../apps/ukvi-complaints/lib/utils&#x27;, {\n  &#x27;sqs-producer&#x27;: {\n    Producer: {\n      create: createSub\n    }\n  },\n  &#x27;uuid&#x27;: {\n    v4: uuidStub\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;968782a4-9090-4606-a3ff-15f9ffae4235&quot;,&quot;parentUUID&quot;:&quot;bb23761d-a0c5-4f08-8314-29c836ef20a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;fullTitle&quot;:&quot;utils \&quot;after each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c23b2124-c038-4440-865b-558d92d486a7&quot;,&quot;parentUUID&quot;:&quot;bb23761d-a0c5-4f08-8314-29c836ef20a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;785ad712-2242-41e4-aa10-37c850ed7ead&quot;,&quot;title&quot;:&quot;#validateAgainstSchema&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the complaintData object fits the schema&quot;,&quot;fullTitle&quot;:&quot;utils #validateAgainstSchema returns true if the complaintData object fits the schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(utils.validateAgainstSchema(validComplaintData)).to.eql(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ebf82b7-7528-48c1-85d3-27949a434c38&quot;,&quot;parentUUID&quot;:&quot;785ad712-2242-41e4-aa10-37c850ed7ead&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an error if the complaintData object does not fit the schema&quot;,&quot;fullTitle&quot;:&quot;utils #validateAgainstSchema throws an error if the complaintData object does not fit the schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(() =&gt; utils.validateAgainstSchema(invalidComplaintData)).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;becedfeb-1495-4aa4-8091-69f594d02763&quot;,&quot;parentUUID&quot;:&quot;785ad712-2242-41e4-aa10-37c850ed7ead&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ebf82b7-7528-48c1-85d3-27949a434c38&quot;,&quot;becedfeb-1495-4aa4-8091-69f594d02763&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ca4f7171-6116-461e-8168-be902f9bb34c&quot;,&quot;title&quot;:&quot;#sendToQueue&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls create on the sqs producer with SQS parameters&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue calls create on the sqs producer with SQS parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;utils.sendToQueue(validComplaintData);\nexpect(createSub).to.have.been.calledOnceWith({\n  queueUrl: &#x27;http://localhost:4566/000000000000/local-queue&#x27;,\n  region: &#x27;eu-west-2&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;714d956e-9a5e-4333-8a99-6611ac89fb92&quot;,&quot;parentUUID&quot;:&quot;ca4f7171-6116-461e-8168-be902f9bb34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls send on sqs producer with a unique id and stringifyed complaint data&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue calls send on sqs producer with a unique id and stringifyed complaint data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;utils.sendToQueue(validComplaintData);\nexpect(sendStub).to.have.been.calledOnceWith(\n  [\n    {\n      id: testUuid,\n      body: JSON.stringify(validComplaintData)\n    }\n  ]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b68c2ce-0a51-4a38-a7c7-5e9637e0a1da&quot;,&quot;parentUUID&quot;:&quot;ca4f7171-6116-461e-8168-be902f9bb34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects if send fails&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue rejects if send fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line no-unused-expressions\nexpect(utils.sendToQueue(invalidComplaintData)).to.be.rejected;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3b20aaa-0e1b-4557-ab00-140ced44d707&quot;,&quot;parentUUID&quot;:&quot;ca4f7171-6116-461e-8168-be902f9bb34c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;714d956e-9a5e-4333-8a99-6611ac89fb92&quot;,&quot;9b68c2ce-0a51-4a38-a7c7-5e9637e0a1da&quot;,&quot;e3b20aaa-0e1b-4557-ab00-140ced44d707&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.3.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;unit&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;none&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.2&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;id&quot;:&quot;default&quot;,&quot;consoleReporter&quot;:&quot;none&quot;,&quot;reportDir&quot;:&quot;test/executions/mochawesome&quot;,&quot;reportFilename&quot;:&quot;unit&quot;},&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;unit&quot;,&quot;reportDir&quot;:&quot;test/executions/mochawesome&quot;,&quot;reportTitle&quot;:&quot;ukvi-complaints&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test/executions/mochawesome/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/executions/mochawesome/unit.json&quot;,&quot;htmlFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/executions/mochawesome/unit.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>