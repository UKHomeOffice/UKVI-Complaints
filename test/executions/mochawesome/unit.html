<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:13,&quot;tests&quot;:27,&quot;passes&quot;:26,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2021-03-18T17:03:13.810Z&quot;,&quot;end&quot;:&quot;2021-03-18T17:03:13.997Z&quot;,&quot;duration&quot;:187,&quot;testsRegistered&quot;:27,&quot;passPercent&quot;:96.29629629629629,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;53bdd07d-0ebe-4b7d-8e73-8efb556bce5d&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c188a006-6c2c-4b82-ae02-33bf96bea8dc&quot;,&quot;title&quot;:&quot;Add to casework system&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/behaviours/add-to-casework.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/behaviours/add-to-casework.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;820c4751-8550-4cb4-94a0-8c048e891fea&quot;,&quot;title&quot;:&quot;#process&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/behaviours/add-to-casework.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/behaviours/add-to-casework.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;#process\&quot;&quot;,&quot;fullTitle&quot;:&quot;Add to casework system #process \&quot;before each\&quot; hook in \&quot;#process\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.clock = date =&gt; sinon.useFakeTimers(new Date(date));\nthis.clock(&#x27;2021-01-01&#x27;);\nreq = {\n  sessionModel: {\n    attributes: {\n      &#x27;csrf-secret&#x27;: &#x27;pTuaXZfpEH4Hi2GwjNTEH4ej&#x27;,\n      errors: null,\n      reason: &#x27;immigration-application&#x27;,\n      steps:\n      [&#x27;/reason&#x27;,\n        &#x27;/immigration-application&#x27;,\n        &#x27;/application-technical&#x27;,\n        &#x27;/application-ref-numbers&#x27;,\n        &#x27;/acting-as-agent&#x27;,\n        &#x27;/who-representing&#x27;,\n        &#x27;/agent-name&#x27;,\n        &#x27;/agent-contact-details&#x27;,\n        &#x27;/agent-representative-name&#x27;,\n        &#x27;/agent-representative-dob&#x27;,\n        &#x27;/agent-representative-nationality&#x27;,\n        &#x27;/complaint-details&#x27;],\n      &#x27;immigration-application&#x27;: &#x27;technical-issues&#x27;,\n      &#x27;who-representing&#x27;: &#x27;legal-rep&#x27;,\n      &#x27;agent-name&#x27;: &#x27;mm&#x27;,\n      &#x27;agent-email&#x27;: &#x27;test@test.com&#x27;,\n      &#x27;agent-phone&#x27;: &#x27;12435667889&#x27;,\n      &#x27;agent-representative-name&#x27;: &#x27;pp&#x27;,\n      &#x27;agent-representative-dob&#x27;: &#x27;1980-02-02&#x27;,\n      &#x27;agent-representative-nationality&#x27;: &#x27;Ukraine&#x27;,\n      &#x27;complaint-details&#x27;: &#x27;test&#x27;,\n      &#x27;where-applied-from&#x27;: &#x27;inside-uk&#x27;,\n      &#x27;reference-numbers&#x27;: &#x27;gwf&#x27;,\n      &#x27;gwf-reference&#x27;: &#x27;GWF012345678&#x27;,\n      &#x27;ho-reference&#x27;: &#x27;&#x27;,\n      &#x27;ihs-reference&#x27;: &#x27;&#x27;,\n      &#x27;uan-reference&#x27;: &#x27;&#x27;,\n      &#x27;acting-as-agent&#x27;: &#x27;yes&#x27; },\n  }\n};\nAddToCasework = Behaviour(Base);\ntestInstance = new AddToCasework();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35f61742-4917-48aa-bed6-3326d4aa17c2&quot;,&quot;parentUUID&quot;:&quot;820c4751-8550-4cb4-94a0-8c048e891fea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;It should add the complaintData to request&quot;,&quot;fullTitle&quot;:&quot;Add to casework system #process It should add the complaintData to request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;testInstance.process(req, res, () =&gt; {});\nconsole.log(req);\nconsole.log(req.form.complaintData);\n// expect(req.form.complaintData).to.deep.equal({\n//   creationDate\n// });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read property &#x27;complaintData&#x27; of undefined&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read property &#x27;complaintData&#x27; of undefined\n    at Context.it (test/unit/behaviours/add-to-casework.spec.js:66:28)\n    at process.topLevelDomainCallback (domain.js:121:23)&quot;},&quot;uuid&quot;:&quot;867b88a9-c27e-4386-b3b3-a3765a112e67&quot;,&quot;parentUUID&quot;:&quot;820c4751-8550-4cb4-94a0-8c048e891fea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;867b88a9-c27e-4386-b3b3-a3765a112e67&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df802e90-d278-4e5f-b5f5-22c5508c39dc&quot;,&quot;title&quot;:&quot;Complaint&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Complaint\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint \&quot;before each\&quot; hook in \&quot;Complaint\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const momentStub = sinon.stub().returns({\n      format: () =&gt; (creationDate)\n    });\n    Complaint = proxyquire(&#x27;../../../../apps/ukvi-complaints/lib/json-converters/complaint&#x27;, {\n      &#x27;moment&#x27;: momentStub\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;720cfc9b-b120-4e54-8149-e71c3b19c257&quot;,&quot;parentUUID&quot;:&quot;df802e90-d278-4e5f-b5f5-22c5508c39dc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should have property complaintAttributes which is an object&quot;,&quot;fullTitle&quot;:&quot;Complaint Should have property complaintAttributes which is an object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicantTestValues);\nexpect(complaint.complaintAttributes).to.be.an(&#x27;object&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eea06418-7866-4797-a8de-bdd0a461969d&quot;,&quot;parentUUID&quot;:&quot;df802e90-d278-4e5f-b5f5-22c5508c39dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b2c7dbc7-e480-49b4-b9d6-16d71a7f6d03&quot;,&quot;title&quot;:&quot;complaintAttributes&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should have creationDate set&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes Should have creationDate set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicantTestValues);\nexpect(complaint.complaintAttributes.creationDate).to.eql(creationDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aca486e-db30-4f4e-b99e-ac10f6a36254&quot;,&quot;parentUUID&quot;:&quot;b2c7dbc7-e480-49b4-b9d6-16d71a7f6d03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ca2641a5-0a76-449a-9e19-9eb80c01e881&quot;,&quot;title&quot;:&quot;reporterDetails&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e88a1dc7-3bf0-43b4-81d7-a70e99538004&quot;,&quot;title&quot;:&quot;applicant&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;applicant\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant \&quot;before each\&quot; hook in \&quot;applicant\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;reporterDetailsValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67d2ea32-2891-487b-bf37-2b01f6eb6cb7&quot;,&quot;parentUUID&quot;:&quot;e88a1dc7-3bf0-43b4-81d7-a70e99538004&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should return applicant details without phone number if not included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant Should return applicant details without phone number if not included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(reporterDetailsValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeApplicant,\n  applicantName: testApplicantName,\n  applicantNationality: testApplicantNationality,\n  applicantDob: testApplicantDob,\n  applicantEmail: testApplicantEmail,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fee9bd2-3a86-470a-8091-4955752b8c2f&quot;,&quot;parentUUID&quot;:&quot;e88a1dc7-3bf0-43b4-81d7-a70e99538004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return applicant details with phone number if included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails applicant Should return applicant details with phone number if included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;reporterDetailsValues[&#x27;applicant-phone&#x27;] = testApplicantPhone;\ncomplaint = new Complaint(reporterDetailsValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeApplicant,\n  applicantName: testApplicantName,\n  applicantNationality: testApplicantNationality,\n  applicantDob: testApplicantDob,\n  applicantEmail: testApplicantEmail,\n  applicantPhone: testApplicantPhone,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ff50a37-3a98-42b6-86a9-7b5275d94b88&quot;,&quot;parentUUID&quot;:&quot;e88a1dc7-3bf0-43b4-81d7-a70e99538004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fee9bd2-3a86-470a-8091-4955752b8c2f&quot;,&quot;1ff50a37-3a98-42b6-86a9-7b5275d94b88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;title&quot;:&quot;agent&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;agent\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent \&quot;before each\&quot; hook in \&quot;agent\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues = Object.assign({}, agentTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52ad204b-18c8-49ee-833b-b7a118fcef68&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should return agent and applicant details with agentType RELATIVE&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType RELATIVE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;relative&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;RELATIVE&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbb9f0ba-8bf7-4fca-830c-664cd885e188&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType LEGAL_REP&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType LEGAL_REP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;legal-rep&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;LEGAL_REP&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e06c69c8-3ffc-4729-8a99-bea842074824&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType SPONSOR&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType SPONSOR&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;sponsor&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;SPONSOR&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9e7ee30-864b-4d95-ad66-bab3de760228&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return agent and applicant details with agentType SUPPORT_ORG&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent it should return agent and applicant details with agentType SUPPORT_ORG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;support-org&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;SUPPORT_ORG&#x27;,\n    agentEmail: testAgentEmail\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17e2be9a-c74c-4349-84ff-a1e9176c5b43&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return agent details with phone number if included&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent Should return agent details with phone number if included&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;agent-phone&#x27;] = testAgentPhone;\nagentValues[&#x27;who-representing&#x27;] = &#x27;relative&#x27;;\ncomplaint = new Complaint(agentValues);\nexpect(complaint.complaintAttributes.complaint.reporterDetails).to.eql({\n  applicantType: applicantTypeAgent,\n  applicantDetails: {\n    applicantName: testApplicantName,\n    applicantNationality: testApplicantNationality,\n    applicantDob: testApplicantDob,\n  },\n  agentDetails: {\n    agentName: testAgentName,\n    agentType: &#x27;RELATIVE&#x27;,\n    agentEmail: testAgentEmail,\n    agentPhone: testAgentPhone,\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;523d3a1b-97e7-4982-814e-a9a89a85c642&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if incorrect who-representing type specified&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reporterDetails agent should throw error if incorrect who-representing type specified&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;agentValues[&#x27;who-representing&#x27;] = &#x27;error-agent&#x27;;\nexpect(() =&gt; new Complaint(agentValues)).to.throw(&#x27;invalid \&quot;who-representing\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;461a42fc-5b4b-47cf-abc5-88b6bd67edb6&quot;,&quot;parentUUID&quot;:&quot;f135d5ef-e6a4-4a5b-b44a-0d8f096f6d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dbb9f0ba-8bf7-4fca-830c-664cd885e188&quot;,&quot;e06c69c8-3ffc-4729-8a99-bea842074824&quot;,&quot;c9e7ee30-864b-4d95-ad66-bab3de760228&quot;,&quot;17e2be9a-c74c-4349-84ff-a1e9176c5b43&quot;,&quot;523d3a1b-97e7-4982-814e-a9a89a85c642&quot;,&quot;461a42fc-5b4b-47cf-abc5-88b6bd67edb6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;title&quot;:&quot;reference&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;reference\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference \&quot;before each\&quot; hook in \&quot;reference\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;daa02a32-cafa-4827-a1dc-a8b2d1b1b498&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Does not include a reference if reference-number is not present&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference Does not include a reference if reference-number is not present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint).to.not.have.all.keys(&#x27;reference&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3f113a8-4127-4afc-aa1b-1add5ed56549&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Does not include a reference if reference-numbers is specified as \&quot;none\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference Does not include a reference if reference-numbers is specified as \&quot;none\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;none&#x27;;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint).to.not.have.all.keys(&#x27;reference&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a1c18c4-aa6c-4e70-899e-0d55722d5eb9&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;gwf\&quot; reference, reference number will be set on GWF_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;gwf\&quot; reference, reference number will be set on GWF_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;gwf&#x27;;\nreferenceValues[&#x27;gwf-reference&#x27;] = testGwfRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;GWF_REF&#x27;,\n  reference: testGwfRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e28d9c40-8f3f-497a-9e54-9171b66e4d1e&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;ho\&quot; reference, reference number will be set on HO_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;ho\&quot; reference, reference number will be set on HO_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;ho&#x27;;\nreferenceValues[&#x27;ho-reference&#x27;] = testHoRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;HO_REF&#x27;,\n  reference: testHoRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57442512-ccf9-4ab4-b20b-83d8fe21b8a7&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;ihs\&quot; reference, reference number will be set on IHS_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;ihs\&quot; reference, reference number will be set on IHS_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;ihs&#x27;;\nreferenceValues[&#x27;ihs-reference&#x27;] = testIhsRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;IHS_REF&#x27;,\n  reference: testIhsRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03ebf78a-c091-4de2-80b9-e5dfca6deb6c&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If \&quot;uan\&quot; reference, reference number will be set on UAN_REF&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference If \&quot;uan\&quot; reference, reference number will be set on UAN_REF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;uan&#x27;;\nreferenceValues[&#x27;uan-reference&#x27;] = testUanRef;\ncomplaint = new Complaint(referenceValues);\nexpect(complaint.complaintAttributes.complaint.reference).to.eql({\n  referenceType: &#x27;UAN_REF&#x27;,\n  reference: testUanRef\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db8fa646-f03d-40d2-8f9b-8bb4ce3a8c2e&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if incorrect ref type specified&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes reference should throw error if incorrect ref type specified&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;referenceValues[&#x27;reference-numbers&#x27;] = &#x27;fff&#x27;;\nexpect(() =&gt; new Complaint(referenceValues)).to.throw(&#x27;invalid \&quot;reference-numbers\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;053bc920-869d-4542-be1f-939940acfa1f&quot;,&quot;parentUUID&quot;:&quot;c151be87-5d84-49bc-812b-9606c3b90098&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3f113a8-4127-4afc-aa1b-1add5ed56549&quot;,&quot;0a1c18c4-aa6c-4e70-899e-0d55722d5eb9&quot;,&quot;e28d9c40-8f3f-497a-9e54-9171b66e4d1e&quot;,&quot;57442512-ccf9-4ab4-b20b-83d8fe21b8a7&quot;,&quot;03ebf78a-c091-4de2-80b9-e5dfca6deb6c&quot;,&quot;db8fa646-f03d-40d2-8f9b-8bb4ce3a8c2e&quot;,&quot;053bc920-869d-4542-be1f-939940acfa1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a2c75688-9e4b-456f-97e1-08363e343a73&quot;,&quot;title&quot;:&quot;complaintDetails&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;title&quot;:&quot;applicationLocation&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/json-converters/complaint.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;applicationLocation\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation \&quot;before each\&quot; hook in \&quot;applicationLocation\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues = Object.assign({}, applicantTestValues);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91b4fb6c-e6d7-4feb-810f-3bb6418a02de&quot;,&quot;parentUUID&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;If no location provided, applicationLocation is not set&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If no location provided, applicationLocation is not set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;complaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails).to.not.have.all.keys(&#x27;applicationLocation&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90ad20f4-08b3-4bb3-bd6c-c11a8429db2d&quot;,&quot;parentUUID&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If applied from \&quot;inside-uk\&quot;, applicationLocation set to INSIDE_UK&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If applied from \&quot;inside-uk\&quot;, applicationLocation set to INSIDE_UK&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;inside-uk&#x27;;\ncomplaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails.applicationLocation).to.eql(&#x27;INSIDE_UK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec7e31a6-d975-4c85-8d9c-8474d18a1c59&quot;,&quot;parentUUID&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;If applied from \&quot;outside-uk\&quot;, applicationLocation set to OUTSIDE_UK&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation If applied from \&quot;outside-uk\&quot;, applicationLocation set to OUTSIDE_UK&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;outside-uk&#x27;;\ncomplaint = new Complaint(applicationLocationValues);\nexpect(complaint.complaintAttributes.complaint.complaintDetails.applicationLocation).to.eql(&#x27;OUTSIDE_UK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe2d52c-8c56-402b-9eb9-ef0724fd8c97&quot;,&quot;parentUUID&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;It throws an error if invalid \&quot;where-applied-from\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint complaintAttributes complaintDetails applicationLocation It throws an error if invalid \&quot;where-applied-from\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;applicationLocationValues[&#x27;where-applied-from&#x27;] = &#x27;location&#x27;;\nexpect(() =&gt; new Complaint(applicationLocationValues)).to.throw(&#x27;invalid \&quot;where-applied-from\&quot; value&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;089f05ac-601a-4ba3-aa90-b2db1130e81c&quot;,&quot;parentUUID&quot;:&quot;0d997843-1b5a-473c-a7a1-8175943e5d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90ad20f4-08b3-4bb3-bd6c-c11a8429db2d&quot;,&quot;ec7e31a6-d975-4c85-8d9c-8474d18a1c59&quot;,&quot;fbe2d52c-8c56-402b-9eb9-ef0724fd8c97&quot;,&quot;089f05ac-601a-4ba3-aa90-b2db1130e81c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;4aca486e-db30-4f4e-b99e-ac10f6a36254&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;eea06418-7866-4797-a8de-bdd0a461969d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ff9fbab-55e6-4ba2-b708-42605fc74f5c&quot;,&quot;title&quot;:&quot;utils&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;fullTitle&quot;:&quot;utils \&quot;before each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;uuidStub = sinon.stub().returns(testUuid);\nsendStub = sinon.stub().resolves();\nsendStub.withArgs({\n  id: testUuid,\n  body: JSON.stringify(invalidComplaintData)\n}).rejects();\ncreateSub = sinon.stub().returns({\n  send: sendStub\n});\nutils = proxyquire(&#x27;../../../apps/ukvi-complaints/lib/utils&#x27;, {\n  &#x27;sqs-producer&#x27;: {\n    Producer: {\n      create: createSub\n    }\n  },\n  &#x27;uuid&#x27;: {\n    v4: uuidStub\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c64ed5f-6bfe-4a17-9be2-89ecd046ceb4&quot;,&quot;parentUUID&quot;:&quot;1ff9fbab-55e6-4ba2-b708-42605fc74f5c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;fullTitle&quot;:&quot;utils \&quot;after each\&quot; hook in \&quot;utils\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;062ed307-0611-4a4c-9ddb-ff3381136d59&quot;,&quot;parentUUID&quot;:&quot;1ff9fbab-55e6-4ba2-b708-42605fc74f5c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;06f08a37-06e8-4ed7-b2bd-8e4a8ae9b751&quot;,&quot;title&quot;:&quot;#validateAgainstSchema&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns true if the complaintData object fits the schema&quot;,&quot;fullTitle&quot;:&quot;utils #validateAgainstSchema returns true if the complaintData object fits the schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(utils.validateAgainstSchema(validComplaintData)).to.eql(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45b2df2f-1811-4d97-adb9-b9f8ed205b43&quot;,&quot;parentUUID&quot;:&quot;06f08a37-06e8-4ed7-b2bd-8e4a8ae9b751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;throws an error if the complaintData object does not fit the schema&quot;,&quot;fullTitle&quot;:&quot;utils #validateAgainstSchema throws an error if the complaintData object does not fit the schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(() =&gt; utils.validateAgainstSchema(invalidComplaintData)).to.throw();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75804426-d195-45df-8b64-7954b26196ea&quot;,&quot;parentUUID&quot;:&quot;06f08a37-06e8-4ed7-b2bd-8e4a8ae9b751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45b2df2f-1811-4d97-adb9-b9f8ed205b43&quot;,&quot;75804426-d195-45df-8b64-7954b26196ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0edd310-e5d2-405a-b0bf-aea72998e4ea&quot;,&quot;title&quot;:&quot;#sendToQueue&quot;,&quot;fullFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/unit/lib/utils.spec.js&quot;,&quot;file&quot;:&quot;/test/unit/lib/utils.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls create on the sqs producer with SQS parameters&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue calls create on the sqs producer with SQS parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;utils.sendToQueue(validComplaintData);\nexpect(createSub).to.have.been.calledOnceWith({\n  queueUrl: &#x27;http://localhost:4566/000000000000/local-queue&#x27;,\n  region: &#x27;eu-west-2&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b680c1d-797c-4deb-a769-34789a1a0ab2&quot;,&quot;parentUUID&quot;:&quot;f0edd310-e5d2-405a-b0bf-aea72998e4ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;calls send on sqs producer with a unique id and stringifyed complaint data&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue calls send on sqs producer with a unique id and stringifyed complaint data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;utils.sendToQueue(validComplaintData);\nexpect(sendStub).to.have.been.calledOnceWith(\n  [\n    {\n      id: testUuid,\n      body: JSON.stringify(validComplaintData)\n    }\n  ]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9f49d0b-e8b7-4690-9119-d245af2d63a2&quot;,&quot;parentUUID&quot;:&quot;f0edd310-e5d2-405a-b0bf-aea72998e4ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an error if send fails&quot;,&quot;fullTitle&quot;:&quot;utils #sendToQueue rejects an error if send fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line no-unused-expressions\nexpect(utils.sendToQueue(invalidComplaintData)).to.be.rejected;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c65bf870-0e65-441b-9c37-c06bec52832c&quot;,&quot;parentUUID&quot;:&quot;f0edd310-e5d2-405a-b0bf-aea72998e4ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b680c1d-797c-4deb-a769-34789a1a0ab2&quot;,&quot;a9f49d0b-e8b7-4690-9119-d245af2d63a2&quot;,&quot;c65bf870-0e65-441b-9c37-c06bec52832c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.3.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;unit&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;none&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.2&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;id&quot;:&quot;default&quot;,&quot;consoleReporter&quot;:&quot;none&quot;,&quot;reportDir&quot;:&quot;test/executions/mochawesome&quot;,&quot;reportFilename&quot;:&quot;unit&quot;},&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;unit&quot;,&quot;reportDir&quot;:&quot;test/executions/mochawesome&quot;,&quot;reportTitle&quot;:&quot;ukvi-complaints&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;test/executions/mochawesome/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/executions/mochawesome/unit.json&quot;,&quot;htmlFile&quot;:&quot;/Users/JosephCoker/Projects/Home-Office/HOF/ukvi-complaints/test/executions/mochawesome/unit.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>